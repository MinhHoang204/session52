<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- 
        Đồng bộ và bất đồng bộ
        1. Đồng bộ : synchronous
         Ngôn ngữ javascript là 1 ngôn ngữ đơn luồng (single - thread: chỉ 1 luồng duy nhất
         luồng code chạy từ trái qua phải và từ trên xuống dưới)
        2. Bất đồng bộ : asynchronous
        - những việc cần thời gian xử lí như các hàm settimeout, setInterval, readfile,
        writefile, gửi request lên server, các thao tác tương tác database
        Trong JS sinh ra các cách để xử lí các tác vụ bất đồng bộ
        1. dùng callback
           callback là gì?
           callback là 1 hàm được truyền vào làm đối số của hàm khác
        2. promise
        3. async-await
     -->
     <script>
        // console.log("công việc 1");
        // setTimeout(()=>{
        //     console.log("công việc 2");
        // },0)
        // console.log("công việc 3");
        function task1(callback) {
            // cần thời gian đi xử lí công việc 1
            // ví dụ công việc 1 cần 2s để thực thi
            setTimeout(()=>{
                console.log("công việc 1 được thực hiện");
                a();
            }, 2000);
        }
        function task2() {
            console.log("được thực thi sau khi tác 1 hoàn thành");
        }
        // task1(task2);
        setTimeout(()=>{
            console.log("công việc 1 thực hiện xong");
            setTimeout(()=>{
                console.log("công việc 2 thực thi sau khi công việc 1 hoàn thành");
                setTimeout(()=>{
                    console.log("công việc 3 thực thi sau khi công việc 2 hoàn thành");
                }, 7000);
            }, 3000);
        }, 1000);
        // khi viết nhiều hàm xử lí lồng nhau thì sẽ rơi vào tình trạng 
        // callback hell (địa ngục)
        let arr = [1,2,3,4,5];
        // let result = arr.map((item)=>{
        //     return item*2
        // })
        // dùng callback viết 1 hàm xử lí tương tự như hàm map
        // custom lại hàm map.
        function myMap(a,callback) {
            let result=[];
            for (const value of a) {
              result.push(callback(value));
            }
            return result;
        } 
        myMap(arr, (item)=>item*2)
        // dùng callback để custom lại hàm filter-lọc
        // let result1 = arr.filter((item)=>item>5);
        // console.log("seresult1", result1);
        function myFilter() {
            let result=[]
            for (const value of array){
                if(callback(value)){
                    result.push(value)
                }
            }
            return result
        }
        myFilter(arr,(item)=>item>3)
     </script>
</body>
</html>